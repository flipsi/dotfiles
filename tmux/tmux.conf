# This is a configuration file for tmux.

# Author: Philipp Moers <soziflip gmail com>

# use UTF8
set -g utf8
set -g status-utf8 on
set-window-option -g utf8 on


# no delay with escape (e.g. in vim)
set -sg escape-time 0


# scrollback history
set -g history-limit 100000


# window and pane numbers from 1 instead of 0
set -g base-index 1
set -g pane-base-index 1


# update multiple tmux instances
#setw -g monitor-activity on
#set -g visual-activity on



# message bar
set -g display-time 2000
set -g display-panes-time 2000

# status bar
set -g status-interval 10
set -g status-left ' '
set -g status-right-length 120
set -g status-right '#{pane_current_path}    [#{pane_width}x#{pane_height}] '
# set -g status-right '#{pane_current_path}    [#{window_index}|#{session_windows}] : [#{pane_index}|#{window_panes}] '
# set -g status-right "#[fg=green][#I:#P #W] {#[bold,fg=cyan]%a %m/%d %H:%M%p#[nobold,fg=default]}"
# set -g status-right "#[fg=yellow]:: %d %b %Y #[fg=green]:: %l:%M %p :: #(date -u | awk '{print $4}')::"

# show/hide status bar completely
set -g status on

# terminal title bar
set -g set-titles-string "#I:#P - #W - #T"




#### COLORS ####

set -g default-terminal "screen-256color"

# statusbar
set-option -g status-bg colour240
set-option -g status-fg colour253
set-option -g status-attr default

# window title colors
set-window-option -g window-status-fg default
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim
set-window-option -g window-status-current-bg colour238
# set-window-option -g window-status-current-fg colour202
set-window-option -g window-status-current-fg colour3
set-window-option -g window-status-current-attr default

# pane border
set-option -g pane-border-fg colour240
set-option -g pane-active-border-fg colour240

# message text
set-option -g message-bg colour235
set-option -g message-fg colour3

# choose window display
setw -g mode-bg colour240
setw -g mode-fg colour3

# pane number display
set-option -g display-panes-active-colour colour3
set-option -g display-panes-colour colour3

# clock
set-window-option -g clock-mode-colour colour3






#### KEYBINDINGS ####

unbind space

# use vim keys
set -gw mode-keys vi

# set tmux prefix
#bind-key Space send-prefix
set -g prefix m-Space
set -g prefix2 C-t

# toggle status bar
bind-key b set -g status on
bind-key B set -g status off

# change window
bind-key "#" choose-window
# bind-key n next-window
# bind-key p previous-window
bind-key space last-window

# new window
bind-key i new-window -c $HOME
# bind-key I new-window -c '#{pane_current_path}'

# new window with current pane
bind-key I break

# split window with new pane
bind-key o split-window -v -c '#{pane_current_path}'
bind-key O split-window -h -c '#{pane_current_path}'

# pane selection
bind-key h select-pane -L
bind-key l select-pane -R
bind-key j select-pane -D
bind-key k select-pane -U
# bind-key j select-pane -t :.+
# bind-key k select-pane -t :.-

# pane rearrangement
bind-key - select-layout even-vertical
bind-key | select-layout even-horizontal
bind-key C-t swap-pane -D
bind-key M-j resize-pane -D 3
bind-key M-k resize-pane -U 3
bind-key M-l resize-pane -R 3
bind-key M-h resize-pane -L 3

# move window/pane to another window
bind-key m command-prompt "move-window -t '%%'"
bind-key M command-prompt -p "move pane to:"  "join-pane -t :'%%'"

# delete pane
bind-key d confirm-before -p "kill-pane #P? (y/n)" kill-pane


# copy mode
# http://jasonwryan.com/blog/2011/06/07/copy-and-paste-in-tmux/
# https://github.com/myfreeweb/dotfiles/blob/master/tmux.conf
bind-key Escape copy-mode # enter copy mode; default [
bind-key -t vi-copy Escape cancel # exit copy mode; or hit q
bind-key -t vi-copy M-k page-up
bind-key -t vi-copy M-j page-down
bind-key -t vi-copy v begin-selection # begin visual mode
bind-key -t vi-copy V select-line # visual line
bind-key -t vi-copy y copy-selection # yank
# bind-key -t vi-copy y copy-selection \; run-shell -b 'tmux show-buffer | xsel -i -b' # yank
bind-key -t vi-copy C-v rectangle-toggle # visual block toggle
bind-key P paste-buffer # paste; default ]

# read and write and delete paste buffer (xsel method)
# https://wiki.archlinux.org/index.php/Tmux#ICCCM_Selection_Integration
# ctrl+shift+v
bind-key < command-prompt -p "send to tmux:" "run-shell 'tmux set-buffer -- \"$(xsel -o -b)\"'"
bind-key > command-prompt -p "send to xsel:" "run-shell 'tmux show-buffer | xsel -i -b'"
bind-key y run-shell 'tmux show-buffer | xsel -i -b'
bind-key + command-prompt "delete-buffer"




# reload this config file
bind f5 source-file ~/.tmux.conf \; display-message " Config reloaded..".
