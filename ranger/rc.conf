# This is a configuration file for ranger, a file manager for the console.
# It should be located at .config/ranger/rc.conf (or a symlink should).

# Author: Philipp Moers <soziflip@gmail.com>


#### SETTINGS ####

# my colorscheme
set colorscheme sfluen

# columns layout
set column_ratios 3,6,8

# show borders?
set draw_borders true

# show when tasks are running
#draw_progress_bar_in_statusbar true

# preview files and folders
set preview_files true
set preview_directories true

# collapse preview column if there is no preview
set collapse_preview false

# set tmux title to "ranger"?
set update_title true
set update_tmux_title false

# show paths in tabs?
set dirname_in_tabs true

# number of remembered directory changes and size of command history
set max_history_size 1000
set max_console_history_size 90000

# mouse usage for the average user :)
set mouse_enabled true


#### KEYBINDINGS ####

# quit ranger
map <c-d> quit

# reload this config file
map <F5> chain source ~/.config/ranger/rc.conf; eval fm.notify("Config reloaded!")

# move fast
map gj move down=10
map gk move up=10

# scroll fast
map <a-j> scroll 20
map <a-k> scroll -20

# change layout
map zln set column_ratios 3,6,8
map zlg set column_ratios 3,6,6
map zlm set column_ratios 2,9,6
map zlp set column_ratios 1,4,9
map zls set column_ratios 1,9,2

# show hidden files or not
map . toggle_option show_hidden

# (un-)select file
map s  mark_files toggle=True
map us mark_files all=True val=False

# enter dir with return, so:
# move to parent dir
map <backspace>  cd ..
map <backspace2> cd ..

# edit file with vim
map ee open_with vim
map eE shell sudoedit %s
map es shell sudo vim %s
map eo shell tmux splitw -v 'vim %s';
map eO shell tmux splitw -h 'vim %s';
#map eO eval if os.environ.has_key('TMUX'): fm.execute_console("shell tmux splitw -h 'vim " + fm.thisfile.basename + "'")
map er         shell vim --servername main --remote %s
map eR console shell vim --servername main --remote %s

# open file
map <A-CR>l open_with less
map <A-CR>f shell tail -f %f
map <A-CR>s shell subl --new-window %s
map <A-CR>S shell subl --add %s
map <A-CR>u open_with luakit
map ow console open_with %space

# execute file
map <A-CR>x      shell -w ./%f
map <A-CR><A-CR> shell -w ./%f

# open some external tools
map io  shell    open . # open current dir in finder
map if  shell    fish
map ib  shell    bash
map iv  shell         vim --servername main
map iV  console shell vim --servername %space
map iu  shell -f open . # open dir in Finder
map it  shell    tig status
map idi shell -w clear; if (diff %c %f); then echo 'Exactly the same, bro!'; fi;
map idv shell    vimdiff %c %f
map idp shell -f diffpdf %c %f
map idu shell -w clear; du -h --max-depth=1 %f
map is  shell -f sxiv *.png *.PNG *.jpg *.JPG *.jpeg *.JPEG
map ip  shell    pdfimages -png %f %f
map ic  shell    bash -c 'sleep 0.3 && cmus-remote --clear && cmus-remote . && cmus-remote --play  && cmus-remote --raw "view 3" && cmus-remote --raw "refresh"' & pkill cmus; cmus
# default keybinding for compatibility
map ii display_file

# execute one shell command
# map ! console shell -pw %space
# open a full shell
map O shell fish

# pack/unpack archive
map ap shell ar -r %f.zip %s
map up shell -pw unar %s

# create ('add') file/directory
map aF console touch %space
map aD console mkdir %space
map af console edit %space
map ad console -p14 eval dirname=""; fm.mkdir(dirname); fm.cd(dirname)
map ae console edit %space
map aE console shell sudoedit %space

# rename a file
map cw console rename%space
map cW console shell sudo mv %f %f
map A rename_append

# create backup copy of file
map yb shell cp -r %f %f.bak
map yB shell sudo cp -r %f %f.bak

# delete file
#map xr console delete
map xr delete
map xt shell rmtrash %s
map xR shell sudo rm -rf %s
map ut shell -w trash-restore

# goto next/previous tab
map <a-n> tab_move 1
map <a-p> tab_move -1

# search, filter and travel
map ö console scout -stl %space
map Ö console scout -st  %space
map ag console shell -w ag %space
map f console filter %space
map F filter
map t console travel %space
map T chain cd /; console travel %space

# jump to directory or mark
map gt cd /tmp
map gl cd /var/log
map gm cd /mnt
map gM cd /run/media/sflip
copymap ' ä
copymap ' <a-w>
map ää cd -
map <Space> cd -

